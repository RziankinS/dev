# Компоненты Kubernetes

### Упаковку приложения в чарт, для деплоя в разные окружения выполним с помощью инструментов:

  - [x]  Сервер приложений Kubernetes для управления развертыванием и масштабированием приложения.
  - [x]  Хранилище данных PostgreSQL для хранения и обработки данных.
  - [x]  Система кэширования Redis для ускорения доступа к часто используемым данным.
  - [x]  Фронтенд-сервер Nginx для обработки внешних запросов и отдачи статики.
  - [x]  Бэкенд-сервер Node.js для обработки бизнес-логики и взаимодействия с базой данных.


### Используемые типы нод:

  - [x] Нода для базы данных (БД)
  - [x] Нода для системы кеширования
  - [x] Нода для фронтенда
  - [x] Нода для бэкенда

### Рассчет необходимых ресурсов для каждой ноды:

    База данных:
        ОЗУ: 4096 МБ * 3 = 12288 МБ
        Ядра: 1 * 3 = 3 ядра
    Система кеширования:
        ОЗУ: 4096 МБ * 3 = 12288 МБ
        Ядра: 1 * 3 = 3 ядра
    Фронтенд:
        ОЗУ: 50 МБ * 5 = 250 МБ
        Ядра: 0.2 * 5 = 1 ядро
    Бекенд:
        ОЗУ: 600 МБ * 10 = 6000 МБ
        Ядра: 1 * 10 = 10 ядер

### Oбщее количество ресурсов:

    ОЗУ: 12288 + 12288 + 250 + 6000 = 28566 МБ
    Ядра: 3 + 3 + 1 + 10 = 17 ядер


### Определим количество рабочих нод, которые справятся с такой нагрузкой:

***Поскольку у нас есть отказоустойчивость, нам нужно иметь как минимум три копии каждого компонента. <br> Так же необходимо добавить запас, учитывая выход из строя как минимум одной ноды, <br> значит, мы должны добавить еще одну копию каждого компонента:</br>***

    4 ноды для базы данных (по 1 ядру и 4 ГБ ОЗУ каждая)
    4 ноды для системы кэширования (по 1 ядру и 4 ГБ ОЗУ каждая)
    6 нод для фронтенда (по 0.2 ядра и 50 МБ ОЗУ каждая)
    11 нод для бэкенда (по 1 ядру и 600 МБ ОЗУ каждая)

***Добавим служебные ресурсы к нодам. Для разных типов нод требования к ресурсам разные. <br> Например, для нод с базой данных и системой кэширования мы можем добавить <br> дополнительные ресурсы для хранения данных и кэша. <br> Для фронтенда и бэкенда мы можем добавить дополнительные ресурсы для работы операционной системы и других служб.***

### В результате получаем следующее количество нод и их параметры:

    Ноды с базой данных: 4 ноды, по 1 ядру, 4 ГБ ОЗУ, 100 ГБ дискового пространства
    Ноды с системой кэширования: 4 ноды, по 1 ядру, 4 ГБ ОЗУ, дополнительное дисковое пространство для кэша
    Ноды фронтенда: 6 нод, по 0.2 ядра, 50 МБ ОЗУ
    Ноды бэкенда: 11 нод, по 1 ядру, 600 МБ ОЗ
---


